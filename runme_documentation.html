<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>runme.sh Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/bash.min.js"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f8f9fa;
            --code-bg: #282c34;
            --text-color: #333;
            --section-bg: white;
            --border-color: #ddd;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            text-align: center;
            padding: 40px 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            margin: 0;
            font-size: 2.5rem;
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 40px;
        }

        h3 {
            color: var(--secondary-color);
            margin-top: 25px;
        }

        .description {
            font-size: 1.2rem;
            margin: 15px 0;
        }

        .code-container {
            background-color: var(--section-bg);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
            overflow: hidden;
        }

        pre {
            margin: 0;
            border-radius: 0 0 8px 8px;
            overflow-x: auto;
        }

        code {
            font-family: 'Fira Code', Consolas, Monaco, 'Andale Mono', monospace;
            font-size: 0.9rem;
            padding: 15px;
            border-radius: 5px;
        }

        .code-header {
            background-color: #f1f1f1;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }

        .code-title {
            font-weight: bold;
            color: #555;
        }

        .code-buttons button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.3s;
        }

        .code-buttons button:hover {
            background-color: #2980b9;
        }

        .section {
            background-color: var(--section-bg);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .collapsible {
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1rem;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: 0.4s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .active, .collapsible:hover {
            background-color: #2980b9;
        }

        .collapsible:after {
            content: '+';
            font-weight: bold;
            float: right;
            margin-left: 5px;
        }

        .active:after {
            content: '-';
        }

        .content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: var(--section-bg);
            border-radius: 0 0 8px 8px;
        }

        .function-description {
            background-color: rgba(46, 204, 113, 0.1);
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .warning {
            background-color: rgba(231, 76, 60, 0.1);
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .note {
            background-color: rgba(52, 152, 219, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #777;
            font-size: 0.9rem;
        }

        /* Flowchart styling */
        .flowchart {
            margin: 40px 0;
            text-align: center;
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        .dark-mode .flowchart {
            background-color: #2d2d2d;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .flowchart svg {
            max-width: 100%;
            height: auto;
        }

        .flowchart img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Dark mode toggle */
        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        /* Dark mode colors */
        body.dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #1a1a1a;
            --code-bg: #282c34;
            --text-color: #f5f5f5;
            --section-bg: #2c2c2c;
            --border-color: #444;
        }

        /* Add these rules for dark mode SVG elements */
        body.dark-mode .flowchart svg line {
            stroke: #ffffff !important;
        }

        body.dark-mode .flowchart svg marker#arrow path {
            fill: #ffffff !important;
        }

        /* Add text shadow to white text in decision boxes */
        .flowchart svg text[fill="white"] {
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.7),
                         1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* Add these specific rules instead */
        /* These target only the Yes/No labels near arrows by their position */
        body.dark-mode .flowchart svg text[x="300"][y="340"],
        body.dark-mode .flowchart svg text[x="300"][y="495"],
        body.dark-mode .flowchart svg text[x="300"][y="695"],
        body.dark-mode .flowchart svg text[x="420"][y="410"],
        body.dark-mode .flowchart svg text[x="500"][y="445"],
        body.dark-mode .flowchart svg text[x="595"][y="505"],
        body.dark-mode .flowchart svg text[x="420"][y="765"],
        body.dark-mode .flowchart svg text[x="710"][y="445"] {
            fill: #ffffff !important;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            header {
                padding: 30px 15px;
            }

            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <button class="dark-mode-toggle" id="darkModeToggle">ðŸŒ“</button>

    <div class="container">
        <header>
            <h1>runme.sh Documentation</h1>
            <p class="description">A comprehensive guide to the virtual environment setup and management script</p>
        </header>

        <section class="section">
            <h2>Script Overview</h2>
            <p>The <code>runme.sh</code> script is designed to automate the creation, verification, and management of a Python virtual environment. It ensures that dependencies are properly maintained, and provides a clean way to run Python applications with the correct dependencies.</p>

            <div class="code-container">
                <div class="code-header">
                    <div class="code-title">Complete runme.sh Script</div>
                    <div class="code-buttons">
                        <button id="copyFullCode">Copy Code</button>
                    </div>
                </div>
                <pre><code class="language-bash">#!/usr/bin/env bash

# Exit on errors
set -e

# Default settings
CLEANUP_FILES=false

# Parse command line arguments
while [[ $# -gt 0 ]]; do
  case $1 in
    --clean-files)
      CLEANUP_FILES=true
      shift
      ;;
    --help)
      echo "Usage: $0 [OPTIONS]"
      echo "Options:"
      echo "  --keep-files    Don't delete old files in workarea"
      echo "  --help          Show this help message"
      exit 0
      ;;
    *)
      echo "Unknown option: $1"
      echo "Use --help for usage information"
      exit 1
      ;;
  esac
done

# Get script directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
# Define the virtual environment directory
VENV_DIR="$SCRIPT_DIR/venv"
# Define the requirements file
REQUIREMENTS_FILE="$SCRIPT_DIR/requirements.txt"
# Define the workarea directory
WORKAREA_DIR="workarea"

# Check if python3.11 is installed
if ! command -v python3.11 &> /dev/null; then
    echo "Python 3.11 is not installed. Please install it first."
    exit 1
fi
if ! command -v pip &> /dev/null; then
    echo "pip is not installed. Please install it first."
    exit 1
fi

# Check if requirements.txt exists
if [ ! -f "$REQUIREMENTS_FILE" ]; then
    echo "Creating requirements.txt file..."
    echo "python-dotenv>=1.1" > "$REQUIREMENTS_FILE"
fi

# Function to create virtual environment
create_venv() {
    echo "Creating virtual environment..."
    python3.11 -m venv "$VENV_DIR"
    touch "$VENV_DIR/.last_update"
}

# Function to update virtual environment
update_venv() {
    echo "Updating virtual environment..."
    "$VENV_DIR/bin/pip" install --upgrade pip
    "$VENV_DIR/bin/pip" install -r "$REQUIREMENTS_FILE"
    touch "$VENV_DIR/.last_update"
}

# Check if virtual environment exists
if [ ! -d "$VENV_DIR" ]; then
    echo "Virtual environment not found."
    create_venv
    update_venv
else
    echo "Virtual environment found."

    # Check if requirements.txt has been modified since last update
    VENV_LAST_UPDATE=$(stat -c %Y "$VENV_DIR/.last_update" 2>/dev/null || echo 0)
    REQUIREMENTS_LAST_MODIFIED=$(stat -c %Y "$REQUIREMENTS_FILE" 2>/dev/null || echo 0)

    if [ "$REQUIREMENTS_LAST_MODIFIED" -gt "$VENV_LAST_UPDATE" ]; then
        echo "Requirements file has been modified since last update."
        update_venv
    else
        echo "Requirements file hasn't changed. Using existing virtual environment."
    fi
fi

# Create and prepare workarea directory
echo "Setting up workarea directory..."
mkdir -p "$WORKAREA_DIR"

# Clean up old files if requested
if [ "$CLEANUP_FILES" = true ]; then
    echo "Cleaning up files older than 7 days in workarea..."
    find "$WORKAREA_DIR" -type f -mtime +7 -delete 2>/dev/null || true
else
    echo "Keeping existing files in workarea directory."
fi

# Activate virtual environment and run the program
echo "Activating virtual environment and starting program..."
source "$VENV_DIR/bin/activate"

# Export the workarea directory as an environment variable
export SAGE_WORKAREA="$WORKAREA_DIR"

# Save current directory
ORIGINAL_DIR=$(pwd)

# Change to workarea directory
echo "Changing to workarea directory: $WORKAREA_DIR"
mkdir -p "$WORKAREA_DIR"  # Ensure it exists
cd "$WORKAREA_DIR"

# Run the main program from the workarea directory
echo "Running main program from workarea directory..."
python "$SCRIPT_DIR/main.py"

# Return to original directory
echo "Returning to original directory..."
cd "$ORIGINAL_DIR"

# Deactivate virtual environment when done
echo "Program exited. Deactivating virtual environment..."
deactivate</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>Script Components</h2>

            <button class="collapsible">Initialization and Setup</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash">#!/usr/bin/env bash

# Exit on errors
set -e

# Get script directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
VENV_DIR="$SCRIPT_DIR/venv"
REQUIREMENTS_FILE="$SCRIPT_DIR/requirements.txt"</code></pre>
                </div>
                <p>This section initializes the script and sets up important variables:</p>
                <ul>
                    <li><strong>#!/usr/bin/env bash</strong> - The shebang line that tells the system to use bash to interpret the script.</li>
                    <li><strong>set -e</strong> - Sets the script to exit immediately if any command exits with a non-zero status, helping to prevent errors from cascading.</li>
                    <li><strong>SCRIPT_DIR</strong> - Determines the directory where the script is located, regardless of where it's called from.</li>
                    <li><strong>VENV_DIR</strong> - Defines the location of the virtual environment as a subdirectory of the script location.</li>
                    <li><strong>REQUIREMENTS_FILE</strong> - Specifies the path to the requirements.txt file with the Python dependencies.</li>
                </ul>
                <div class="note">
                    <p>The technique used to get the script directory is a common bash idiom that works regardless of whether the script is executed directly or sourced from another script.</p>
                </div>
            </div>

            <button class="collapsible">Command Line Arguments</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Default settings
CLEANUP_FILES=false

# Parse command line arguments
while [[ $# -gt 0 ]]; do
  case $1 in
    --clean-files)
      CLEANUP_FILES=true
      shift
      ;;
    --help)
      echo "Usage: $0 [OPTIONS]"
      echo "Options:"
      echo "  --keep-files    Don't delete old files in workarea"
      echo "  --help          Show this help message"
      exit 0
      ;;
    *)
      echo "Unknown option: $1"
      echo "Use --help for usage information"
      exit 1
      ;;
  esac
done</code></pre>
                </div>
                <p>This section handles command line arguments to customize script behavior:</p>
                <ul>
                    <li><strong>--clean-files</strong> - When provided, the script will clean up files older than 7 days in the workarea directory</li>
                    <li><strong>--help</strong> - Displays usage information and available options</li>
                </ul>
                <p>The script uses a while loop with a case statement to parse each argument provided to the script. This is a common pattern for handling command-line arguments in bash scripts.</p>
                <div class="note">
                    <p>By default, the script does not clean up old files. You need to explicitly pass the <code>--clean-files</code> flag if you want this behavior.</p>
                </div>
            </div>

            <button class="collapsible">Python Environment Check</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Check if python3.11 is installed
if ! command -v python3.11 &> /dev/null; then
    echo "Python 3.11 is not installed. Please install it first."
    exit 1
fi
if ! command -v pip &> /dev/null; then
    echo "pip is not installed. Please install it first."
    exit 1
fi</code></pre>
                </div>
                <p>This section validates the required Python environment:</p>
                <ul>
                    <li>Checks if Python 3.11 is installed on the system</li>
                    <li>Verifies that pip (Python package installer) is available</li>
                    <li>Exits with an error message if either requirement is not met</li>
                </ul>
                <div class="note">
                    <p>The script uses <code>command -v</code> to check for the presence of executables in the system's PATH. The <code>&> /dev/null</code> part redirects all output to null, effectively silencing it.</p>
                </div>
                <div class="warning">
                    <p>The script specifically requires Python 3.11. Even if you have other Python versions installed, it will not proceed unless version 3.11 is available.</p>
                </div>
            </div>

            <button class="collapsible">Requirements File Verification</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Check if requirements.txt exists
if [ ! -f "$REQUIREMENTS_FILE" ]; then
    echo "Creating requirements.txt file..."
    echo "python-dotenv>=1.1" > "$REQUIREMENTS_FILE"
fi</code></pre>
                </div>
                <p>This section ensures that a requirements.txt file exists:</p>
                <ul>
                    <li>It checks if the requirements.txt file exists at the expected location.</li>
                    <li>If the file is missing, it creates a new one with a basic dependency (python-dotenv>=1.1).</li>
                </ul>
                <div class="note">
                    <p>This ensures the script won't fail if a user forgets to include a requirements file. By default, it adds python-dotenv as a minimum requirement.</p>
                </div>
            </div>

            <button class="collapsible">Virtual Environment Functions</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Function to create virtual environment
create_venv() {
    echo "Creating virtual environment..."
    python3.11 -m venv "$VENV_DIR"
    touch "$VENV_DIR/.last_update"
}

# Function to update virtual environment
update_venv() {
    echo "Updating virtual environment..."
    "$VENV_DIR/bin/pip" install --upgrade pip
    "$VENV_DIR/bin/pip" install -r "$REQUIREMENTS_FILE"
    touch "$VENV_DIR/.last_update"
}</code></pre>
                </div>
                <h3>create_venv Function</h3>
                <div class="function-description">
                    <p>Creates a new Python virtual environment using Python 3.11.</p>
                    <ul>
                        <li>The virtual environment is created at the path specified by $VENV_DIR</li>
                        <li>Creates a timestamp file (.last_update) to track when the environment was last updated</li>
                    </ul>
                </div>

                <h3>update_venv Function</h3>
                <div class="function-description">
                    <p>Updates the packages in the virtual environment.</p>
                    <ul>
                        <li>Upgrades pip to the latest version</li>
                        <li>Installs or updates all dependencies listed in requirements.txt</li>
                        <li>Updates the timestamp in .last_update to record when this update occurred</li>
                    </ul>
                </div>
                <div class="note">
                    <p>These functions are defined but not executed until needed later in the script. This is a common pattern in bash scripting to improve readability and maintainability.</p>
                </div>
            </div>

            <button class="collapsible">Virtual Environment Management</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Check if virtual environment exists
if [ ! -d "$VENV_DIR" ]; then
    echo "Virtual environment not found."
    create_venv
    update_venv
else
    echo "Virtual environment found."

    # Check if requirements.txt has been modified since last update
    VENV_LAST_UPDATE=$(stat -c %Y "$VENV_DIR/.last_update" 2>/dev/null || echo 0)
    REQUIREMENTS_LAST_MODIFIED=$(stat -c %Y "$REQUIREMENTS_FILE" 2>/dev/null || echo 0)

    if [ "$REQUIREMENTS_LAST_MODIFIED" -gt "$VENV_LAST_UPDATE" ]; then
        echo "Requirements file has been modified since last update."
        update_venv
    else
        echo "Requirements file hasn't changed. Using existing virtual environment."
    fi
fi</code></pre>
                </div>
                <p>This section manages the virtual environment's lifecycle:</p>
                <ol>
                    <li>First, it checks if the virtual environment directory exists:
                        <ul>
                            <li>If it doesn't exist, it calls the functions to create and update a new environment</li>
                        </ul>
                    </li>
                    <li>If the virtual environment already exists, it checks if it needs updating:
                        <ul>
                            <li>Compares the timestamp of when the virtual environment was last updated</li>
                            <li>Compares it with the timestamp of when requirements.txt was last modified</li>
                            <li>If requirements.txt is newer, it updates the virtual environment</li>
                            <li>Otherwise, it uses the existing environment without changes</li>
                        </ul>
                    </li>
                </ol>
                <div class="note">
                    <p>The <code>stat -c %Y</code> command is used to get the last modification time in seconds since the epoch. The <code>|| echo 0</code> part provides a fallback value of 0 if the file doesn't exist or if stat fails for any reason.</p>
                </div>
            </div>

            <button class="collapsible">Workarea Setup and Management</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Define the workarea directory
WORKAREA_DIR="workarea"

# Create and prepare workarea directory
echo "Setting up workarea directory..."
mkdir -p "$WORKAREA_DIR"

# Clean up old files if requested
if [ "$CLEANUP_FILES" = true ]; then
    echo "Cleaning up files older than 7 days in workarea..."
    find "$WORKAREA_DIR" -type f -mtime +7 -delete 2>/dev/null || true
else
    echo "Keeping existing files in workarea directory."
fi

# Export the workarea directory as an environment variable
export SAGE_WORKAREA="$WORKAREA_DIR"</code></pre>
                </div>
                <p>This section handles the setup and management of the workarea directory:</p>
                <ul>
                    <li>Defines a workarea directory where the program will store generated files</li>
                    <li>Creates the directory if it doesn't exist using <code>mkdir -p</code> (creates parent directories as needed)</li>
                    <li>Optionally cleans up files older than 7 days if the <code>--clean-files</code> flag was provided</li>
                    <li>Exports the workarea path as an environment variable (<code>SAGE_WORKAREA</code>) for the Python program to use</li>
                </ul>
                <div class="function-description">
                    <p>The cleanup functionality uses the <code>find</code> command with the following parameters:</p>
                    <ul>
                        <li><code>-type f</code> - Only finds files (not directories)</li>
                        <li><code>-mtime +7</code> - Only finds files modified more than 7 days ago</li>
                        <li><code>-delete</code> - Deletes the found files</li>
                        <li><code>2>/dev/null || true</code> - Suppresses error messages and ensures the script continues even if there are errors</li>
                    </ul>
                </div>
            </div>

            <button class="collapsible">Directory Management</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Save current directory
ORIGINAL_DIR=$(pwd)

# Change to workarea directory
echo "Changing to workarea directory: $WORKAREA_DIR"
mkdir -p "$WORKAREA_DIR"  # Ensure it exists
cd "$WORKAREA_DIR"

# Run the main program from the workarea directory
echo "Running main program from workarea directory..."
python "$SCRIPT_DIR/main.py"

# Return to original directory
echo "Returning to original directory..."
cd "$ORIGINAL_DIR"</code></pre>
                </div>
                <p>This section manages the directory context for running the Python program:</p>
                <ul>
                    <li>Saves the current directory path before changing directories</li>
                    <li>Changes the working directory to the workarea directory</li>
                    <li>Runs the main Python program from within the workarea context</li>
                    <li>Returns to the original directory after the Python program exits</li>
                </ul>
                <div class="note">
                    <p>Running the program from within the workarea directory ensures that any files generated by the program are stored in this designated area by default, providing better file organization and management.</p>
                </div>
            </div>

            <button class="collapsible">Execution and Cleanup</button>
            <div class="content">
                <div class="code-container">
                    <pre><code class="language-bash"># Activate virtual environment and run the program
echo "Activating virtual environment and starting program..."
source "$VENV_DIR/bin/activate"

# Export the workarea directory as an environment variable
export SAGE_WORKAREA="$WORKAREA_DIR"

# Save current directory
ORIGINAL_DIR=$(pwd)

# Change to workarea directory
echo "Changing to workarea directory: $WORKAREA_DIR"
mkdir -p "$WORKAREA_DIR"  # Ensure it exists
cd "$WORKAREA_DIR"

# Run the main program from the workarea directory
echo "Running main program from workarea directory..."
python "$SCRIPT_DIR/main.py"

# Return to original directory
echo "Returning to original directory..."
cd "$ORIGINAL_DIR"

# Deactivate virtual environment when done
echo "Program exited. Deactivating virtual environment..."
deactivate</code></pre>
                </div>
                <p>This final section executes the main program and cleans up:</p>
                <ol>
                    <li>Activates the virtual environment using the <code>source</code> command</li>
                    <li>Makes the workarea path available to the Python program as an environment variable</li>
                    <li>Saves the current directory location</li>
                    <li>Changes to the workarea directory</li>
                    <li>Executes the main Python program (main.py) from within the workarea</li>
                    <li>Returns to the original directory</li>
                    <li>Deactivates the virtual environment</li>
                </ol>
                <div class="warning">
                    <p>The script assumes there's a <code>main.py</code> file in the same directory as the script. If this file is missing or named differently, the script will fail at this point.</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Script Flow Diagram</h2>
            <p>The following diagram illustrates the execution flow of the runme.sh script:</p>

            <div class="flowchart">
                <svg width="800" height="1200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Background grid for better visualization -->
                    <defs>
                        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                            <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#00000033"/>
                        </filter>
                        <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5"
                            markerWidth="6" markerHeight="6" orient="auto">
                            <path d="M 0 0 L 10 5 L 0 10 z" fill="#2c3e50"/>
                        </marker>
                    </defs>

                    <!-- Start -->
                    <rect x="300" y="20" width="200" height="60" rx="30" ry="30" fill="#3498db" filter="url(#shadow)" />
                    <text x="400" y="55" text-anchor="middle" fill="white" font-weight="bold" font-size="16">Start Script</text>

                    <!-- Parse Command Line Args -->
                    <rect x="300" y="120" width="200" height="60" rx="10" ry="10" fill="#f1c40f" filter="url(#shadow)" />
                    <text x="400" y="155" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Parse Command Line Args</text>
                    <line x1="400" y1="80" x2="400" y2="120" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Initialize Variables -->
                    <rect x="300" y="220" width="200" height="60" rx="10" ry="10" fill="#f1c40f" filter="url(#shadow)" />
                    <text x="400" y="255" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Initialize Variables</text>
                    <line x1="400" y1="180" x2="400" y2="220" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Check if requirements.txt exists -->
                    <path d="M 300,320 L 500,320 L 400,390 Z" fill="#e74c3c" filter="url(#shadow)" />
                    <text x="400" y="350" text-anchor="middle" fill="white" font-weight="bold" font-size="14">requirements.txt exists?</text>
                    <line x1="400" y1="280" x2="400" y2="320" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Create requirements.txt -->
                    <rect x="100" y="330" width="160" height="60" rx="10" ry="10" fill="#f1c40f" filter="url(#shadow)" />
                    <text x="180" y="365" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Create requirements.txt</text>
                    <line x1="320" y1="355" x2="260" y2="355" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                    <text x="300" y="340" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">No</text>

                    <!-- Check if venv exists -->
                    <path d="M 300,430 L 500,430 L 400,500 Z" fill="#e74c3c" filter="url(#shadow)" />
                    <text x="400" y="460" text-anchor="middle" fill="white" font-weight="bold" font-size="14">Virtual environment exists?</text>
                    <line x1="400" y1="390" x2="400" y2="430" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                    <text x="420" y="410" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Yes</text>
                    <line x1="180" y1="390" x2="180" y2="410" stroke="#2c3e50" stroke-width="2.5" />
                    <line x1="180" y1="410" x2="350" y2="410" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Create venv -->
                    <rect x="100" y="510" width="160" height="60" rx="10" ry="10" fill="#f1c40f" filter="url(#shadow)" />
                    <text x="180" y="545" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Create Virtual Env</text>
                    <line x1="330" y1="465" x2="250" y2="510" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                    <text x="300" y="495" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">No</text>

                    <!-- Check if requirements updated -->
                    <path d="M 540,430 L 700,430 L 620,500 Z" fill="#e74c3c" filter="url(#shadow)" />
                    <text x="620" y="460" text-anchor="middle" fill="white" font-weight="bold" font-size="14">Requirements updated?</text>
                    <line x1="470" y1="465" x2="540" y2="465" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                    <text x="500" y="445" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Yes</text>

                    <!-- Update venv -->
                    <rect x="540" y="510" width="160" height="60" rx="10" ry="10" fill="#f1c40f" filter="url(#shadow)" />
                    <text x="620" y="545" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Update Virtual Env</text>
                    <line x1="620" y1="500" x2="620" y2="510" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                    <text x="595" y="505" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Yes</text>
                    <line x1="180" y1="570" x2="180" y2="600" stroke="#2c3e50" stroke-width="2.5" />
                    <line x1="180" y1="600" x2="300" y2="600" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Setup Workarea -->
                    <rect x="320" y="580" width="160" height="60" rx="10" ry="10" fill="#f1c40f" filter="url(#shadow)" />
                    <text x="400" y="615" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Setup Workarea</text>

                    <!-- Connect "No" from requirements updated -->
                    <line x1="700" y1="465" x2="740" y2="465" stroke="#2c3e50" stroke-width="2.5" />
                    <text x="710" y="445" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">No</text>
                    <line x1="740" y1="465" x2="740" y2="600" stroke="#2c3e50" stroke-width="2.5" />
                    <line x1="740" y1="600" x2="480" y2="600" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Connect update venv to workarea setup -->
                    <line x1="620" y1="570" x2="620" y2="600" stroke="#2c3e50" stroke-width="2.5" />
                    <line x1="620" y1="600" x2="480" y2="600" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Clean Files Check -->
                    <path d="M 300,680 L 500,680 L 400,750 Z" fill="#e74c3c" filter="url(#shadow)" />
                    <text x="400" y="710" text-anchor="middle" fill="white" font-weight="bold" font-size="14">Clean old files?</text>
                    <line x1="400" y1="640" x2="400" y2="680" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Clean Files -->
                    <rect x="100" y="710" width="160" height="60" rx="10" ry="10" fill="#f1c40f" filter="url(#shadow)" />
                    <text x="180" y="745" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Clean Old Files</text>
                    <line x1="330" y1="715" x2="260" y2="740" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                    <text x="300" y="695" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Yes</text>

                    <!-- Activate venv -->
                    <rect x="320" y="780" width="160" height="60" rx="10" ry="10" fill="#2ecc71" filter="url(#shadow)" />
                    <text x="400" y="815" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Activate Virtual Env</text>
                    <line x1="400" y1="750" x2="400" y2="780" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                    <text x="420" y="765" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">No</text>
                    <!-- Connect clean files to activate -->
                    <line x1="180" y1="770" x2="180" y2="810" stroke="#2c3e50" stroke-width="2.5" />
                    <line x1="180" y1="810" x2="320" y2="810" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Change to workarea -->
                    <rect x="320" y="870" width="160" height="60" rx="10" ry="10" fill="#2ecc71" filter="url(#shadow)" />
                    <text x="400" y="905" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Change to Workarea</text>
                    <line x1="400" y1="840" x2="400" y2="870" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Run main.py -->
                    <rect x="320" y="960" width="160" height="60" rx="10" ry="10" fill="#2ecc71" filter="url(#shadow)" />
                    <text x="400" y="995" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Run main.py</text>
                    <line x1="400" y1="930" x2="400" y2="960" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- Return to original dir -->
                    <rect x="320" y="1050" width="160" height="60" rx="10" ry="10" fill="#2ecc71" filter="url(#shadow)" />
                    <text x="400" y="1085" text-anchor="middle" fill="#333" font-weight="bold" font-size="14">Return to Original Dir</text>
                    <line x1="400" y1="1020" x2="400" y2="1050" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />

                    <!-- End -->
                    <rect x="320" y="1140" width="160" height="60" rx="30" ry="30" fill="#3498db" filter="url(#shadow)" />
                    <text x="400" y="1175" text-anchor="middle" fill="white" font-weight="bold" font-size="16">End Script</text>
                    <line x1="400" y1="1110" x2="400" y2="1140" stroke="#2c3e50" stroke-width="2.5" marker-end="url(#arrow)" />
                </svg>
            </div>

            <div class="note" style="margin-top: 20px">
                <p><strong>Flowchart Legend:</strong></p>
                <ul style="display: flex; flex-wrap: wrap; list-style-type: none; padding: 0; gap: 20px;">
                    <li style="display: flex; align-items: center;">
                        <span style="display: inline-block; width: 20px; height: 20px; border-radius: 10px; background-color: #3498db; margin-right: 8px;"></span>
                        Start/End points
                    </li>
                    <li style="display: flex; align-items: center;">
                        <span style="display: inline-block; width: 20px; height: 20px; border-radius: 3px; background-color: #f1c40f; margin-right: 8px;"></span>
                        Process steps
                    </li>
                    <li style="display: flex; align-items: center;">
                        <span style="display: inline-block; width: 20px; height: 20px; border-radius: 3px; background-color: #e74c3c; margin-right: 8px;"></span>
                        Decision points
                    </li>
                    <li style="display: flex; align-items: center;">
                        <span style="display: inline-block; width: 20px; height: 20px; border-radius: 3px; background-color: #2ecc71; margin-right: 8px;"></span>
                        Execution steps
                    </li>
                </ul>
            </div>
        </section>

        <section class="section">
            <h2>Key Features</h2>
            <ul>
                <li><strong>Automatic Environment Setup</strong> - Creates a Python virtual environment if one doesn't exist</li>
                <li><strong>Dependency Management</strong> - Ensures all required packages are installed and up to date</li>
                <li><strong>Smart Updating</strong> - Only updates the virtual environment when the requirements have changed</li>
                <li><strong>Error Prevention</strong> - Exits immediately if any command fails (set -e)</li>
                <li><strong>Clean Environment Handling</strong> - Properly activates and deactivates the virtual environment</li>
                <li><strong>Python 3.11 Specific</strong> - Designed to work with Python 3.11</li>
                <li><strong>Workarea Management</strong> - Handles a dedicated directory for generated files and optionally cleans up old files</li>
                <li><strong>Command Line Arguments</strong> - Allows customization of script behavior through flags</li>
            </ul>
        </section>

        <section class="section">
            <h2>Usage</h2>
            <p>To use this script:</p>
            <ol>
                <li>Make sure the script is executable:
                    <div class="code-container">
                        <pre><code class="language-bash">chmod +x runme.sh</code></pre>
                    </div>
                </li>
                <li>Execute the script:
                    <div class="code-container">
                        <pre><code class="language-bash">./runme.sh</code></pre>
                    </div>
                </li>
                <li>Optional: Use command line arguments to customize behavior:
                    <div class="code-container">
                        <pre><code class="language-bash">./runme.sh --clean-files</code></pre>
                    </div>
                </li>
            </ol>
            <div class="note">
                <p>The script will create a requirements.txt file if one doesn't exist, set up a virtual environment, install all required packages, and then run the main.py script.</p>
            </div>
            <div class="warning">
                <p>Make sure you have Python 3.11 installed on your system, as that's the specific version the script is set to use.</p>
            </div>
        </section>

        <footer>
            <p>runme.sh Documentation | Generated with AI Assistant</p>
        </footer>
    </div>

    <script>
        // Syntax highlighting
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });

        // Copy button functionality
        document.getElementById('copyFullCode').addEventListener('click', function() {
            const fullCode = document.querySelector('.code-container pre code').textContent;
            navigator.clipboard.writeText(fullCode).then(function() {
                const originalText = document.getElementById('copyFullCode').textContent;
                document.getElementById('copyFullCode').textContent = 'Copied!';
                setTimeout(() => {
                    document.getElementById('copyFullCode').textContent = originalText;
                }, 2000);
            }, function() {
                alert('Failed to copy code.');
            });
        });

        // Collapsible sections
        document.querySelectorAll('.collapsible').forEach(button => {
            button.addEventListener('click', function() {
                this.classList.toggle('active');
                const content = this.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        });

        // Dark mode toggle
        document.getElementById('darkModeToggle').addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        });

        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }
    </script>
</body>
</html>
